## 用户手册

### 软件信息

* 版本：1.0
* 作者：lh9171338
* 日期：2022-06-30

### 快捷键（默认）

* Ctrl + O：打开图像文件夹
* Ctrl + S：保存标注结果
* Ctrl + V：进入下一张图像
* Ctrl + B：返回上一张图像
* Ctrl + C：进入线段标注状态
* Ctrl + D：删除选中的线段标注
* Ctrl + W：图像变换，对普光图像进行直方图均衡化操作，提升图像对比度
* Ctrl + Q：互换普光图像和事件帧位置
* Ctrl + U：查看用户手册

**注**：编辑`default.yaml`文件可以修改快捷键

### 鼠标按键

* 左键：标注一个线段端点
* 右键：进入或退出线段标注状态

### 操作流程

1. 选择一个待标注图像所在的文件夹
2. 单击鼠标右键（或通过`Ctrl + C`快捷键）进入线段标注状态
3. 通过鼠标左键标注线段端点，标注完两个线段端点后，一条线段标注完成，中途可以单击鼠标右键（或通过`Ctrl + C`快捷键）退出线段标注状态
4. 重复步骤2-3，中途最好多次保存标注结果，以防程序意外崩溃

### 数据集文件结构

    |-- dataset   
        |-- <image folder>
            |-- 000001.png  
            |-- 000002.png  
            |-- ...  
        |-- <label folder>  
            |-- 000001.mat  
            |-- 000002.mat  
            |-- ...

**注**：`<image folder>`和`<label folder>`路径在`default.yaml`文件中配置，二者可以相同

标注图像由图像图像和事件帧沿水平方向拼接而成，示例如下：
<p align="center">
    <img src="000001.png"/>
</p> 

### 程序运行

```shell
python Labelline.py
```

### 标注准则

1. 保持线段具有公共端点的性质：在线段标注状态下，当鼠标移动到离某条已标注线段端点很近时，界面有==捕获==状态显示，此时点击鼠标左键进行标点，可以确保当前标注的端点等于该已存在的端点
2. 保持线段水平/竖直的性质：当标注的线段非常接近水平/竖直时，程序会自动将其将其转为水平/竖直
3. 尽量标注长线，如果它们在3D空间并不是一条线，则分段标注
4. 太短的线可以不标
5. 非常接近的平行线只标注一条
6. 2条线端点不重合，但非常接近，不好标注时，可以舍弃其中一条线
7. 唯一宗旨是确保标注正确、整洁
